# å‰ç«¯å¿«é€Ÿè¿­ä»£çƒ­æ›´æ–°æ–¹æ¡ˆ

## ğŸ¯ æ–¹æ¡ˆæ¦‚è¿°

æœ¬æ–¹æ¡ˆæä¾›äº†ä¸€å¥—å®Œæ•´çš„å‰ç«¯å¿«é€Ÿå¼€å‘å’Œéƒ¨ç½²æµç¨‹ï¼Œæ”¯æŒå¼€å‘ç¯å¢ƒçƒ­æ›´æ–°å’Œç”Ÿäº§ç¯å¢ƒå¿«é€Ÿéƒ¨ç½²ã€‚

## ğŸ”§ å¼€å‘ç¯å¢ƒçƒ­æ›´æ–°

### 1. å®¹å™¨åŒ–å¼€å‘ç¯å¢ƒ

```bash
# æ„å»ºå¼€å‘é•œåƒ
cd src/frontend
docker build -f Dockerfile.dev -t edm-frontend:dev .

# å¯åŠ¨å¼€å‘å®¹å™¨ï¼ˆæ”¯æŒçƒ­æ›´æ–°ï¼‰
docker run -d \
  --name edm-frontend-debug \
  --network edm_edm-debug-network \
  -p 3003:3001 \
  -v "$(pwd)/src/frontend/src:/app/src" \
  -v "$(pwd)/src/frontend/public:/app/public" \
  edm-frontend:dev
```

### 2. çƒ­æ›´æ–°æœºåˆ¶

- **æ–‡ä»¶ç›‘å¬**: é€šè¿‡Docker VolumeæŒ‚è½½å®ç°å®æ—¶æ–‡ä»¶åŒæ­¥
- **è‡ªåŠ¨é‡è½½**: Reactå¼€å‘æœåŠ¡å™¨è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶å˜åŒ–å¹¶é‡æ–°ç¼–è¯‘
- **å®æ—¶é¢„è§ˆ**: æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°æ˜¾ç¤ºæœ€æ–°æ›´æ”¹

## ğŸš€ ç”Ÿäº§ç¯å¢ƒå¿«é€Ÿéƒ¨ç½²

### 1. æ„å»ºç”Ÿäº§é•œåƒ

```bash
# æ„å»ºç”Ÿäº§é•œåƒï¼ˆæ”¯æŒå¤šæ¶æ„ï¼‰
cd src/frontend
docker build -f Dockerfile.prod -t edm-frontend:v1.x --platform linux/amd64 .
```

### 2. é•œåƒä¼ è¾“ä¸éƒ¨ç½²

```bash
# ä¿å­˜é•œåƒ
docker save edm-frontend:v1.x | gzip > edm-frontend-v1.x.tar.gz

# ä¸Šä¼ åˆ°ç”Ÿäº§æœåŠ¡å™¨
scp edm-frontend-v1.x.tar.gz ubuntu@43.135.38.15:~/

# ç”Ÿäº§æœåŠ¡å™¨åŠ è½½é•œåƒ
ssh ubuntu@43.135.38.15 "gunzip -c ~/edm-frontend-v1.x.tar.gz | docker load"

# æ›´æ–°ç”Ÿäº§å®¹å™¨
ssh ubuntu@43.135.38.15 "
  docker stop edm-frontend-prod && docker rm edm-frontend-prod
  docker run -d --name edm-frontend-prod --network edm_edm-network -p 3001:80 edm-frontend:v1.x
"
```

## ğŸ“‹ å¸¸ç”¨å‘½ä»¤

### å¼€å‘ç¯å¢ƒ

```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒ
npm run dev

# æŸ¥çœ‹å¼€å‘å®¹å™¨æ—¥å¿—
docker logs -f edm-frontend-debug

# é‡å¯å¼€å‘å®¹å™¨
docker restart edm-frontend-debug
```

### ç”Ÿäº§ç¯å¢ƒ

```bash
# å¿«é€Ÿéƒ¨ç½²æ–°ç‰ˆæœ¬
./scripts/deploy-frontend.sh

# æŸ¥çœ‹ç”Ÿäº§å®¹å™¨çŠ¶æ€
docker ps | grep edm-frontend-prod

# éªŒè¯éƒ¨ç½²ç»“æœ
curl -I https://tkmail.fun
```

## ğŸ› é—®é¢˜æ’æŸ¥

### 1. çƒ­æ›´æ–°ä¸ç”Ÿæ•ˆ

**é—®é¢˜**: ä¿®æ”¹ä»£ç åé¡µé¢ä¸è‡ªåŠ¨åˆ·æ–°

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥VolumeæŒ‚è½½
docker inspect edm-frontend-debug | grep Mounts -A 20

# é‡å¯å¼€å‘å®¹å™¨
docker restart edm-frontend-debug
```

### 2. ç”Ÿäº§ç¯å¢ƒ404é”™è¯¯

**é—®é¢˜**: é¡µé¢åˆ·æ–°åå‡ºç°404é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥nginxé…ç½®
docker exec edm-frontend-prod cat /etc/nginx/conf.d/default.conf

# é‡æ–°åŠ è½½nginx
docker exec edm-frontend-prod nginx -s reload
```

---

## ğŸ“ å˜æ›´è®°å½•

- 2025-06-26: åˆ›å»ºæ–‡æ¡£ï¼ŒåŒ…å«çƒ­æ›´æ–°å’Œå¿«é€Ÿéƒ¨ç½²æ–¹æ¡ˆ
- 2025-06-26: ä¿®å¤ç”Ÿäº§ç¯å¢ƒ404é—®é¢˜ï¼Œæ›´æ–°nginxé…ç½®
