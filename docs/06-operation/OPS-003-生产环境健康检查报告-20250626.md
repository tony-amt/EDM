# ç”Ÿäº§ç¯å¢ƒå¥åº·æ£€æŸ¥æŠ¥å‘Š

**æ£€æŸ¥æ—¶é—´**: 2025-06-26 23:35  
**æ£€æŸ¥äºº**: AI Assistant  
**æœåŠ¡å™¨**: 43.135.38.15 (Ubuntu)

## ğŸ¯ æ£€æŸ¥æ€»ç»“

âœ… **æ•°æ®åº“é…ç½®é—®é¢˜å·²ä¿®å¤**  
âœ… **èµ„æºä½¿ç”¨æƒ…å†µå¥åº·**  
âœ… **å‰ç«¯404é—®é¢˜å·²æ ¹æ²»**  
âš ï¸ **è®¤è¯é—®é¢˜éœ€è¦è¿›ä¸€æ­¥æ’æŸ¥**

## ğŸ“Š ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

### æœåŠ¡å™¨æ•´ä½“èµ„æº
- **CPUè´Ÿè½½**: 0.23 (æ­£å¸¸)
- **å†…å­˜ä½¿ç”¨**: 1.3GB / 3.6GB (36%, å¥åº·)
- **å¯ç”¨å†…å­˜**: 2.0GB (å……è¶³)
- **ç£ç›˜ä½¿ç”¨**: 20GB / 50GB (40%, æ­£å¸¸)
- **Swap**: æœªä½¿ç”¨ (æ­£å¸¸)

### EDMé¡¹ç›®å®¹å™¨èµ„æºä½¿ç”¨

| å®¹å™¨ | CPUä½¿ç”¨ç‡ | å†…å­˜ä½¿ç”¨ | å†…å­˜å æ¯” | çŠ¶æ€ |
|------|----------|----------|----------|------|
| edm-frontend-prod | 0.00% | 3.04MB | 0.08% | âœ… å¥åº· |
| edm-backend-prod | 0.02% | 79.14MB | 2.13% | âœ… å¥åº· |
| edm-postgres-prod | 0.00% | 64.32MB | 1.73% | âœ… å¥åº· |
| edm-redis-prod | 0.60% | 4.38MB | 0.12% | âœ… å¥åº· |
| edm-nginx-prod | 0.00% | 2.36MB | 0.06% | âœ… å¥åº· |

**EDMé¡¹ç›®æ€»èµ„æºå ç”¨**: ~150MBå†…å­˜ï¼ŒCPUä½¿ç”¨ç‡æä½

## ğŸ”§ ä¿®å¤çš„é—®é¢˜

### 1. æ•°æ®åº“é…ç½®é—®é¢˜
**é—®é¢˜**: åç«¯å°è¯•è¿æ¥ä¸å­˜åœ¨çš„æ•°æ®åº“å¯¼è‡´æ€§èƒ½é—®é¢˜  
**åŸå› **: æ•°æ®åº“é…ç½®æ­£ç¡®ï¼Œä½†ä¹‹å‰è¯¯åˆ›å»ºäº†é”™è¯¯çš„æ•°æ®åº“  
**è§£å†³æ–¹æ¡ˆ**: 
- åˆ é™¤é”™è¯¯åˆ›å»ºçš„ `edm_db` æ•°æ®åº“
- ç¡®è®¤ä½¿ç”¨æ­£ç¡®çš„ `amt_mail_system` æ•°æ®åº“
- éªŒè¯æ•°æ®åº“è¿æ¥æ­£å¸¸

### 2. å‰ç«¯404é—®é¢˜
**é—®é¢˜**: é¡µé¢åˆ·æ–°åå‡ºç°404é”™è¯¯  
**è§£å†³æ–¹æ¡ˆ**: 
- é‡æ–°æ„å»ºå‰ç«¯é•œåƒ `edm-frontend:v1.2`
- ä¿®å¤nginxé…ç½®ï¼Œæ·»åŠ React SPAè·¯ç”±æ”¯æŒ
- éªŒè¯æ‰€æœ‰è·¯ç”±æ­£å¸¸è®¿é—®

## ğŸš¨ å¾…è§£å†³é—®é¢˜

### 1. APIè®¤è¯é—®é¢˜
**ç°è±¡**: APIè¿”å›401è®¤è¯å¤±è´¥  
**å½±å“**: å‰ç«¯æ— æ³•æ­£å¸¸åŠ è½½æ•°æ®  
**å»ºè®®**: éœ€è¦æ£€æŸ¥JWT tokenéªŒè¯é€»è¾‘

## ğŸ—ï¸ é¡¹ç›®å…±å­˜æƒ…å†µ

æœåŠ¡å™¨ä¸Šè¿è¡Œä¸¤ä¸ªé¡¹ç›®ï¼š

### EDMé¡¹ç›® (ç«¯å£åˆ†é…)
- å‰ç«¯: 3001
- åç«¯: 8080  
- æ•°æ®åº“: 5432
- Redis: 6379
- Nginx: 80/443

### Gloda Channelé¡¹ç›® (ç«¯å£åˆ†é…)
- å‰ç«¯: 7005
- åç«¯: 7004
- æ•°æ®åº“: 7002
- Redis: 7003
- Nginx: 7001

**èµ„æºç«äº‰åˆ†æ**: 
- ç«¯å£æ— å†²çª âœ…
- å†…å­˜ä½¿ç”¨åˆç† âœ…  
- CPUè´Ÿè½½æ­£å¸¸ âœ…
- ä¸¤é¡¹ç›®å¯ä»¥å®‰å…¨å…±å­˜ âœ…

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. æ•°æ®åº“ä¼˜åŒ–
- å½“å‰è¿æ¥æ± é…ç½®åˆç† (max: 10, min: 1)
- æ•°æ®åº“æŸ¥è¯¢å“åº”æ­£å¸¸
- å»ºè®®å®šæœŸæ¸…ç†æ—¥å¿—å’Œä¸´æ—¶æ–‡ä»¶

### 2. å®¹å™¨èµ„æºé™åˆ¶
å»ºè®®ä¸ºå®¹å™¨è®¾ç½®èµ„æºé™åˆ¶ï¼š
```yaml
deploy:
  resources:
    limits:
      memory: 512M
      cpus: '0.5'
```

### 3. ç›‘æ§å‘Šè­¦
å»ºè®®æ·»åŠ ä»¥ä¸‹ç›‘æ§æŒ‡æ ‡ï¼š
- å†…å­˜ä½¿ç”¨ç‡ > 80%
- CPUä½¿ç”¨ç‡ > 70%
- ç£ç›˜ä½¿ç”¨ç‡ > 80%
- APIå“åº”æ—¶é—´ > 3ç§’

## ğŸ” ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’

1. **ä¼˜å…ˆçº§1**: ä¿®å¤APIè®¤è¯é—®é¢˜
2. **ä¼˜å…ˆçº§2**: æ·»åŠ å¥åº·æ£€æŸ¥æ¥å£
3. **ä¼˜å…ˆçº§3**: å®Œå–„ç›‘æ§å‘Šè­¦
4. **ä¼˜å…ˆçº§4**: ä¼˜åŒ–å®¹å™¨èµ„æºé…ç½®

## ğŸ“ æ£€æŸ¥å‘½ä»¤è®°å½•

```bash
# ç³»ç»Ÿèµ„æºæ£€æŸ¥
top -bn1 | head -20
free -h
df -h

# Dockerå®¹å™¨æ£€æŸ¥  
docker ps
docker stats --no-stream

# æ•°æ®åº“è¿æ¥æ£€æŸ¥
docker exec edm-postgres-prod psql -U postgres -c '\l'

# APIå“åº”æ—¶é—´æ£€æŸ¥
time curl -s -o /dev/null -w "%{http_code} %{time_total}s" https://tkmail.fun/api/dashboard/stats
```

---

**ç»“è®º**: ç”Ÿäº§ç¯å¢ƒæ•´ä½“å¥åº·ï¼Œä¸»è¦æ€§èƒ½é—®é¢˜å·²è§£å†³ï¼Œè®¤è¯é—®é¢˜éœ€è¦è¿›ä¸€æ­¥æ’æŸ¥ã€‚ 