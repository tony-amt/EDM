# 测试用例：第一个里程碑 (M1) - v1.0

**文档编号:** TEST-M1-AllModules-v1.0
**版本:** 1.0
**日期:** 2025-05-26
**测试负责人:** AI Project Agent
**里程碑目标:** 验证用户认证、用户管理（管理员）、标签管理、联系人管理及联系人打标功能的核心稳定性和正确性。

## 1. 测试范围

### 1.1. 用户认证模块 (`Auth`)
- **接口:**
  - `POST /api/auth/register` (用户注册)
  - `POST /api/auth/login` (用户登录)
  - `GET /api/auth/me` (获取当前用户信息)
  - `PUT /api/auth/password` (修改当前用户密码)
- **测试类型:** 单元测试 (接口参数验证、业务逻辑、错误处理)、集成测试 (模块间交互)、用户流程测试。

### 1.2. 用户管理模块 (`User` - 管理员操作)
- **接口:**
  - `GET /api/users` (获取用户列表)
  - `GET /api/users/:id` (获取单个用户)
  - `POST /api/users` (创建新用户)
  - `PUT /api/users/:id` (更新用户)
  - `PUT /api/users/:id/reset-password` (重置用户密码)
  - `DELETE /api/users/:id` (删除用户)
- **测试类型:** 单元测试、集成测试、用户流程测试。
- **关键点:** 权限校验 (仅管理员可操作)。

### 1.3. 标签管理模块 (`Tag`)
- **接口:**
  - `GET /api/tags` (获取标签列表)
  - `GET /api/tags/tree` (获取标签树结构)
  - `GET /api/tags/:id` (获取单个标签)
  - `POST /api/tags` (创建标签)
  - `PUT /api/tags/:id` (更新标签)
  - `DELETE /api/tags/:id` (删除标签)
- **测试类型:** 单元测试、集成测试、用户流程测试。
- **关键点:** 父子标签关系、标签 `count` 计数准确性、删除已使用或有子标签的标签时的保护逻辑。

### 1.4. 联系人管理模块 (`Contact`) 与打标功能
- **接口:**
  - `GET /api/contacts` (获取联系人列表)
  - `GET /api/contacts/:id` (获取单个联系人)
  - `POST /api/contacts` (创建联系人)
  - `PUT /api/contacts/:id` (更新联系人)
  - `DELETE /api/contacts/:id` (删除联系人)
  - (批量导入导出和批量操作接口 `POST /api/contacts/import`, `GET /api/contacts/export`, `POST /api/contacts/bulk-*` 本次里程碑的测试将验证其接口存在性和基本保护，但不测试其完整业务逻辑，因为其功能尚未实现或非MVP重点。)
- **测试类型:** 单元测试、集成测试、用户流程测试。
- **关键点:** 联系人与标签的关联正确性 (创建、更新时)、标签 `count` 的相应更新。

## 2. 通用测试考虑

- **安全性:**
  - 输入校验：防止常见注入 (如XSS, SQL注入 - 虽然ORM层面有防护，接口层也应有校验)。
  - 权限控制：确保私有接口受保护，特定操作（如用户管理）仅限授权角色。
  - 敏感信息处理：密码不应明文返回或存储。
- **数据一致性:** 跨模块操作时，如创建联系人并打标签，确保数据在各表间正确同步。
- **错误处理:** 所有接口在遇到无效输入、未授权访问、服务器内部错误等情况时，应返回标准化的错误响应和合适的状态码。
- **分页与排序:** 对于列表接口，验证分页逻辑和排序功能的正确性。
- **搜索与筛选:** 对于列表接口，验证搜索和各种筛选条件的正确性。

## 3. 测试环境

- **环境:** Docker 容器化部署 (同开发环境)。
- **数据库:** PostgreSQL (通过 Docker Compose 启动)。
- **测试框架:** (待确定，需检查项目 `package.json`)
- **执行方式:** 自动化测试脚本优先。

## 4. 预期产出

- 详细的测试执行报告。
- Bug 列表及复现步骤。
- 最终测试通过的证明。

---
*此文档为概要，具体的测试点和步骤将由QA Agent在测试脚本中细化。* 