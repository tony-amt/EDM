# SPEC-003-A.MT邮件冷发系统V2.0项目规范

## 文档信息

| 文档属性 | 内容                             |
| -------- | -------------------------------- |
| 文档名称 | A.MT邮件冷发系统V2.0项目规范     |
| 文档编号 | SPEC-003                         |
| 版本号   | V1.0                             |
| 创建日期 | 2023-12-20                       |
| 状态     | 生效                             |

## 1. 文档管理规范

### 1.1 文档目录结构

```
/docs
├── 01-requirements/           # 需求相关文档
├── 02-specifications/         # 规范文档
├── 03-design/                 # 设计文档
├── 04-development/            # 开发文档
├── 05-testing/                # 测试文档
├── 06-operation/              # 运维文档
├── 07-user/                   # 用户文档
└── 08-changes/                # 变更管理
```

### 1.2 文档命名规范

- 格式: `[类型前缀]-[编号]-[简短描述].[扩展名]`
- 类型前缀: REQ, SPEC, DESIGN, DEV, TEST, OPS, USER, CHANGE
- 示例: `REQ-001-项目概述.md`

### 1.3 文档版本管理

- 版本号格式: vX.Y
  - X: 主版本号，重大变更时递增
  - Y: 次版本号，小幅变更时递增
- 每次变更需在文档中记录变更历史

## 2. 需求变更规则

### 2.1 需求文档变更限制

基础需求文档(`REQ-001-A.MT邮件冷发系统V2.0需求文档.md`)一旦确认，**不允许变更**，除非业务主导人有明确要求。这确保了需求的稳定性和开发工作的连续性。

### 2.2 需求变更流程

如果在实现过程中需要对已确认的需求提出修改建议或补充，必须遵循以下流程：

1. 创建变更提案文档，放置于`/docs/08-changes/`目录
2. 变更提案格式如下：

```
变更编号：CHG-XXX
提出时间：YYYY-MM-DD
原始功能编号：FXX
建议变更内容：详细描述变更内容
影响评估（数据库/接口/测试/UI）：评估变更影响范围
```

3. 变更提案必须经过业务主导人审阅和决策
4. 决策结果（采纳/部分采纳/不采纳）需记录在变更提案文档中
5. 获得批准的变更通过新文档实现，而非修改原始需求文档

### 2.3 改进建议管理

系统实现过程中如有对需求的改进建议，应：

1. 创建单独的咨询文档提出建议
2. 清晰说明建议理由和预期收益
3. 提供影响评估和实施建议
4. 征求业务主导人的决策意见
5. 根据决策结果进行后续操作

## 3. 开发规范

### 3.1 代码风格

- 遵循前端/后端各自语言的标准代码风格指南
- 使用ESLint/Prettier等工具保证代码风格一致性
- 代码提交前必须通过风格检查

### 3.2 命名规范

- 变量/函数：使用驼峰命名法(camelCase)
- 类/组件：使用帕斯卡命名法(PascalCase)
- 常量：使用大写下划线命名法(UPPER_SNAKE_CASE)
- 文件名：使用小写短横线命名法(kebab-case)

### 3.3 注释规范

- 类/函数必须添加文档注释，说明用途、参数和返回值
- 复杂逻辑必须添加行内注释
- 临时代码必须添加TODO注释

### 3.4 提交规范

- 提交信息格式：`[类型] 简短描述`
- 类型：feat, fix, docs, style, refactor, test, chore
- 每个提交应专注于单一变更

## 4. 测试规范

### 4.1 测试类型

- 单元测试：覆盖关键业务逻辑
- 集成测试：覆盖模块间交互
- 端到端测试：覆盖核心用户流程
- 性能测试：满足性能需求指标

### 4.2 测试覆盖率

- 单元测试覆盖率目标：80%
- 集成测试覆盖核心业务流程
- 端到端测试覆盖关键用户场景

### 4.3 测试驱动开发

- 鼓励采用测试驱动开发(TDD)方法
- 先编写测试，再实现功能
- 测试作为需求理解和功能验收的依据

## 5. 项目管理规范

### 5.1 任务管理

- 使用Jira/Trello等工具跟踪任务
- 任务状态：待办、进行中、待评审、已完成
- 每周更新任务状态和进度

### 5.2 会议规范

- 每日站会：15分钟，同步进度和问题
- 周会：1小时，总结周进度，规划下周工作
- 迭代评审：演示完成功能，收集反馈

### 5.3 沟通规范

- 重要决策和讨论需形成文档
- 技术问题优先使用项目管理工具讨论
- 紧急问题可使用即时通讯工具

## 6. 部署与发布规范

### 6.1 环境定义

- 开发环境：供开发人员使用
- 测试环境：供测试人员验证功能
- 预发布环境：模拟生产环境配置
- 生产环境：用户实际使用的环境

### 6.2 发布流程

- 代码提交 → 自动化测试 → 代码评审 → 合并主分支
- 主分支构建 → 部署测试环境 → 测试验收
- 创建发布分支 → 部署预发布环境 → 预发布测试
- 部署生产环境 → 监控系统状态

### 6.3 版本命名

- 版本号格式：X.Y.Z
  - X: 主版本号，不兼容的API变更
  - Y: 次版本号，向下兼容的功能新增
  - Z: 修订号，向下兼容的问题修正

## 7. 项目Agent系统规则

### 7.1 项目控制中心（主控Agent）

- 唯一Agent调度者，调度一切下游Agent
- 管理任务状态、文档流转、依赖链
- 所有工作均由业务主导人【指令触发】
- 禁止自动分发任务或擅自推进流程
- 为项目最终成功上线负责，发挥owner精神

### 7.2 上下游协作链规范

| 来源Agent | 目标Agent | 输出字段要求 |
|-----------|-----------|--------------|
| 需求分析师 | 用户故事 | 功能编号、用户行为 |
| 用户故事 | 原型设计 | 页面目标、字段结构 |
| 原型设计 | 数据库 | 页面字段→数据字段映射 |
| 数据库 | 架构设计 | 模块数据映射依赖 |
| 架构设计 | 接口设计 | 服务边界定义 |
| 接口设计 | QA & Coding | 接口参数标准化输出 |

### 7.3 需求建议与补充规则

如在实现过程中对需求有更好的建议或补充，应遵循以下规则：

1. 创建单独的咨询文档提出建议
2. 明确说明建议理由和预期效果
3. 提供建议的影响评估
4. 征求业务主导人的决策意见
5. 根据决策结果进行后续操作

需求文档(`REQ-001-A.MT邮件冷发系统V2.0需求文档.md`)不允许变更，除非业务主导人有明确要求。 