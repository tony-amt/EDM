# 🏠 EDM系统本地环境访问指引

## 📊 系统状态概览

### ✅ 服务运行状态
- **后端API服务**: ✅ 正常运行
  - 地址: http://localhost:3000
  - 健康检查: http://localhost:3000/health
  - Swagger文档: http://localhost:3000/api-docs (如果已配置)

- **前端Web界面**: ✅ 正常运行
  - 地址: http://localhost:3001
  - 开发模式: 支持热重载

- **数据库**: ✅ PostgreSQL已连接
  - 主机: localhost:5432
  - 数据库: amt_mail_system

---

## 🔐 默认登录账号

### 管理员账号
```
🌐 登录地址: http://localhost:3001
👤 用户名: admin
🔑 密码: admin123456
📧 邮箱: admin@example.com
🛡️ 角色: 管理员
```

**⚠️ 安全提醒**: 
- 这是开发环境的默认账号
- 生产环境部署前请务必修改密码
- 建议首次登录后立即修改密码

---

## 🧪 验收测试指引

### 1. 基础功能验收

#### 1.1 用户认证模块 ✅
- [ ] **登录功能**
  - 访问: http://localhost:3001
  - 使用上述管理员账号登录
  - 验证登录成功并跳转到主页

- [ ] **权限验证**
  - 验证未登录状态下无法访问管理页面
  - 验证登录状态下可以访问所有功能

#### 1.2 联系人管理模块 ✅
- [ ] **联系人列表**
  - 查看联系人列表页面
  - 验证分页功能
  - 验证搜索功能

- [ ] **联系人创建**
  - 点击"新建联系人"
  - 填写基本信息：姓名、邮箱、电话、公司、职位
  - 验证创建成功

- [ ] **联系人编辑**
  - 选择现有联系人进行编辑
  - 修改信息并保存
  - 验证修改成功

- [ ] **联系人删除**
  - 删除单个联系人
  - 验证删除确认对话框
  - 验证删除成功

#### 1.3 标签管理模块 ✅
- [ ] **标签创建**
  - 创建新标签（如："VIP客户"、"潜在客户"）
  - 设置标签颜色和描述
  - 验证创建成功

- [ ] **标签分配**
  - 为联系人分配标签
  - 验证标签显示正确
  - 验证批量操作功能

#### 1.4 邮件模板管理 ✅
- [ ] **模板创建**
  - 创建邮件模板
  - 使用变量占位符（如：{{name}}、{{company}}）
  - 验证模板保存成功

- [ ] **模板预览**
  - 预览模板效果
  - 验证变量替换功能
  - 验证HTML渲染正确

#### 1.5 活动管理模块 ✅
- [ ] **活动创建**
  - 创建新的邮件营销活动
  - 设置活动名称和描述
  - 验证创建成功

- [ ] **活动配置**
  - 选择目标联系人群体
  - 配置邮件模板
  - 设置发送时间

#### 1.6 任务管理模块 ✅
- [ ] **任务创建**
  - 基于活动创建发送任务
  - 配置收件人规则
  - 设置计划发送时间

- [ ] **任务监控**
  - 查看任务状态
  - 验证任务列表显示
  - 检查任务详情

### 2. 接口功能验收

#### 2.1 API健康检查
```bash
curl http://localhost:3000/health
```
预期返回：
```json
{
  "status": "ok",
  "service": "amt-mail-system",
  "database": "healthy",
  "environment": "development"
}
```

#### 2.2 认证接口测试
```bash
# 登录接口
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"usernameOrEmail": "admin", "password": "admin123456"}'
```

#### 2.3 联系人接口测试
```bash
# 获取联系人列表（需要JWT token）
curl -X GET http://localhost:3000/api/contacts \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

### 3. 性能验收标准

#### 3.1 响应时间要求
- **页面加载**: < 2秒
- **API响应**: < 500ms
- **数据库查询**: < 100ms

#### 3.2 并发处理
- **同时用户数**: 支持10个用户并发操作
- **数据处理**: 支持1000条联系人记录

### 4. 兼容性验收

#### 4.1 浏览器兼容性
- [ ] Chrome (推荐)
- [ ] Firefox
- [ ] Safari
- [ ] Edge

#### 4.2 响应式设计
- [ ] 桌面端 (1920x1080)
- [ ] 平板端 (768x1024)
- [ ] 手机端 (375x667)

---

## 🛠️ 开发工具和调试

### 1. 浏览器开发者工具
- **F12** 打开开发者工具
- **Network标签页** 查看API请求
- **Console标签页** 查看错误日志

### 2. API测试工具
- **Postman**: 推荐用于API测试
- **curl命令**: 适合快速测试
- **Swagger UI**: http://localhost:3000/api-docs (如果已配置)

### 3. 日志查看
```bash
# 查看后端日志
tail -f src/backend/logs/app.log

# 查看PM2日志 (如果使用PM2)
pm2 logs edm-backend
```

---

## 🐛 常见问题排查

### 1. 前端无法访问
**检查项目**:
```bash
cd src/frontend
npm start
```

**常见原因**:
- 端口3001被占用
- npm依赖未安装
- 环境变量配置错误

### 2. 后端API错误
**检查项目**:
```bash
curl http://localhost:3000/health
```

**常见原因**:
- 数据库连接失败
- 端口3000被占用
- 环境变量配置错误

### 3. 登录失败
**检查项目**:
- 确认管理员用户已创建
- 检查用户名密码是否正确
- 查看浏览器控制台错误信息

### 4. 数据库连接问题
**检查项目**:
```bash
# 检查PostgreSQL服务
brew services list | grep postgresql

# 重启PostgreSQL (macOS)
brew services restart postgresql@14
```

---

## 📊 验收报告模板

### 测试结果记录

| 功能模块 | 测试项 | 状态 | 备注 |
|---------|--------|------|------|
| 用户认证 | 登录功能 | ✅/❌ | |
| 用户认证 | 权限验证 | ✅/❌ | |
| 联系人管理 | 增删改查 | ✅/❌ | |
| 标签管理 | 标签操作 | ✅/❌ | |
| 模板管理 | 模板创建 | ✅/❌ | |
| 活动管理 | 活动配置 | ✅/❌ | |
| 任务管理 | 任务执行 | ✅/❌ | |

### 性能测试结果

| 指标 | 要求 | 实际 | 状态 |
|------|------|------|------|
| 页面加载时间 | < 2秒 | ___秒 | ✅/❌ |
| API响应时间 | < 500ms | ___ms | ✅/❌ |
| 并发用户数 | 10用户 | ___用户 | ✅/❌ |

### 验收结论

- **整体评价**: ✅ 通过 / ❌ 需要修改
- **主要问题**: _________________
- **建议改进**: _________________
- **是否可以上线**: ✅ 是 / ❌ 否

---

## 🚀 验收通过后的后续步骤

1. **数据备份**
   - 导出测试数据
   - 准备生产环境数据

2. **安全配置**
   - 修改默认密码
   - 配置JWT密钥
   - 设置CORS策略

3. **生产部署**
   - 选择部署方案（AWS/腾讯云）
   - 按照部署文档执行
   - 配置域名和SSL

4. **上线验证**
   - 生产环境功能测试
   - 性能监控设置
   - 用户培训准备

---

## 📞 技术支持

**遇到问题请提供以下信息**:
1. 详细的错误描述
2. 浏览器控制台错误截图
3. 操作步骤重现
4. 系统环境信息 (浏览器版本、操作系统等)

**联系方式**:
- GitHub Issues: [项目地址]/issues
- 邮箱: [技术支持邮箱]
- 文档: 参考 AWS_DEPLOYMENT_GUIDE.md 和 TENCENT_CLOUD_DEPLOYMENT_GUIDE.md 