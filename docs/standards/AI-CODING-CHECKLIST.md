# AI Coding 开发前检查清单

## 🎯 核心原则
**减少分歧，专注实现，提高开发和测试效率**

基于真实项目经验总结，每次正式coding前必须完成的检查项目。

## 📋 严格检查清单

### ✅ 1. 需求明确性检查

#### 需求文档完整性
- [ ] **功能范围明确**: 
  - ✅ 验证标准：每个功能模块都有明确的输入、输出、边界条件
  - 🔍 检查方法：逐一检查需求文档中的功能描述，确保无"等等"、"可能"等模糊表述
  - 📋 输出物：`功能边界确认表.md`（功能名称、输入、输出、边界条件、依赖关系）

- [ ] **用户故事完整**: 
  - ✅ 验证标准：每个用户故事都包含"作为...我希望...以便..."三要素
  - 🔍 检查方法：确认所有用户故事都有明确的验收条件（Given/When/Then格式）
  - 📋 输出物：用户故事验收条件100%覆盖

- [ ] **验收标准清晰**: 
  - ✅ 验证标准：每个功能都有可量化、可测试的验收标准
  - 🔍 检查方法：验收标准必须包含具体的操作步骤和期望结果
  - 📋 输出物：验收标准必须使用"当...时，系统应该..."格式

- [ ] **异常场景覆盖**: 
  - ✅ 验证标准：至少覆盖网络异常、数据异常、权限异常、并发异常四类场景
  - 🔍 检查方法：每个功能都要有对应的异常处理设计
  - 📋 输出物：`异常场景覆盖表.md`

- [ ] **产品经理确认**: 
  - ✅ 验证标准：所有业务逻辑都有产品经理的书面确认
  - 🔍 检查方法：关键决策点必须有会议纪要或邮件确认
  - 📋 输出物：产品确认记录文档

#### 需求变更控制
- [ ] **变更机制建立**: 
  - ✅ 验证标准：有`CHANGE-[编号]-[日期]-[描述].md`格式的变更记录模板
  - 🔍 检查方法：变更流程包含：提出->评估->决策->实施->验收5个步骤
  - 📋 输出物：变更管理流程文档

- [ ] **影响评估规范**: 
  - ✅ 验证标准：变更影响评估必须覆盖：API接口、数据库、前端组件、测试用例四个维度
  - 🔍 检查方法：每个变更都要有工作量评估和风险评估
  - 📋 输出物：变更影响评估模板

- [ ] **版本控制**: 
  - ✅ 验证标准：需求文档有版本号（v1.0, v1.1...），每次修改都要更新版本
  - 🔍 检查方法：Git提交历史能追溯文档变更
  - 📋 输出物：文档版本历史记录

### ✅ 2. 技术架构一致性检查

#### 数据类型统一
- [ ] **ID类型标准**: 
  - ✅ 验证标准：所有表的主键都是`UUID DEFAULT gen_random_uuid()`
  - 🔍 检查方法：执行数据库schema检查脚本，确认无SERIAL/INTEGER主键
  - 📋 输出物：`数据库ID类型检查报告.md`

- [ ] **API格式一致**: 
  - ✅ 验证标准：所有API都遵循统一的请求/响应格式，错误码规范一致
  - 🔍 检查方法：API文档中所有接口都使用相同的状态码定义（200/400/401/403/404/500）
  - 📋 输出物：API格式规范文档和接口检查清单

- [ ] **数据库设计**: 
  - ✅ 验证标准：字段命名遵循snake_case，外键命名规范一致
  - 🔍 检查方法：数据库设计文档中所有表都有完整的字段说明和约束定义
  - 📋 输出物：数据库设计规范检查报告

- [ ] **现有代码兼容**: 
  - ✅ 验证标准：新功能的数据模型与现有User、Contact、Template等模型兼容
  - 🔍 检查方法：确认外键关联无类型冲突，能正常建立关联关系
  - 📋 输出物：系统兼容性检查报告

#### 配置环境对齐
- [ ] **Docker配置验证**: 
  - ✅ 验证标准：docker-compose.yml中的服务配置与架构设计文档完全一致
  - 🔍 检查方法：对比架构文档和docker-compose.yml，检查端口、环境变量、依赖关系
  - 📋 输出物：Docker配置一致性检查表

- [ ] **端口映射正确**: 
  - ✅ 验证标准：前端(3001)、后端(3000)、数据库(5432)、Redis(6379)端口映射正确
  - 🔍 检查方法：启动系统后能正常访问所有服务
  - 📋 输出物：端口验证测试报告

- [ ] **依赖服务启用**: 
  - ✅ 验证标准：Redis、PostgreSQL等所有依赖服务都在docker-compose.yml中启用且健康检查通过
  - 🔍 检查方法：`docker-compose ps`显示所有服务状态为healthy
  - 📋 输出物：服务健康检查报告

- [ ] **环境变量完整**: 
  - ✅ 验证标准：所有必需的环境变量都在docker-compose.yml中定义且无遗漏
  - 🔍 检查方法：对比代码中使用的process.env变量与配置文件
  - 📋 输出物：环境变量完整性检查清单

### ✅ 3. 设计文档质量检查

#### 设计完整性
- [ ] **API接口设计**: 
  - ✅ 验证标准：每个接口都有完整的请求参数、响应示例、错误码说明
  - 🔍 检查方法：所有接口都要有Swagger/OpenAPI规范的文档
  - 📋 输出物：API接口完整性检查表（接口数量、文档完整度统计）

- [ ] **数据库设计**: 
  - ✅ 验证标准：所有表都有主键、外键、索引、约束的完整定义
  - 🔍 检查方法：数据库设计包含ERD图，所有关系都有明确说明
  - 📋 输出物：数据库设计完整性检查报告

- [ ] **前端原型**: 
  - ✅ 验证标准：每个页面都有明确的字段定义、交互流程、状态管理
  - 🔍 检查方法：原型设计涵盖所有用户操作路径，无遗漏页面
  - 📋 输出物：前端页面覆盖度检查表

- [ ] **错误处理**: 
  - ✅ 验证标准：系统、业务、网络、权限四类错误都有对应的处理方案
  - 🔍 检查方法：每种错误类型都有用户友好的提示信息设计
  - 📋 输出物：错误处理设计文档

#### 设计一致性
- [ ] **命名规范**: 
  - ✅ 验证标准：API使用camelCase，数据库使用snake_case，前端组件使用PascalCase
  - 🔍 检查方法：所有设计文档中的命名都遵循统一规范
  - 📋 输出物：命名规范一致性检查报告

- [ ] **状态管理**: 
  - ✅ 验证标准：数据状态流转有明确的状态机定义，状态变更逻辑清晰
  - 🔍 检查方法：关键业务对象（如Campaign）的状态变更路径已明确定义
  - 📋 输出物：状态管理设计文档

- [ ] **权限设计**: 
  - ✅ 验证标准：每个接口都有明确的权限要求（管理员/普通用户）
  - 🔍 检查方法：权限矩阵覆盖所有功能点，无权限空白区域
  - 📋 输出物：权限控制矩阵表

### ✅ 4. 代码实现准备

#### 开发环境准备
- [ ] **统一开发环境**: 
  - ✅ 验证标准：所有开发者使用相同的Docker版本和docker-compose配置
  - 🔍 检查方法：环境配置文档包含具体的版本要求和安装步骤
  - 📋 输出物：开发环境规范文档

- [ ] **代码规范**: 
  - ✅ 验证标准：项目包含.eslintrc、.prettierrc配置文件，且规则已验证
  - 🔍 检查方法：运行`npm run lint`无错误，代码格式统一
  - 📋 输出物：代码规范检查报告

- [ ] **Git工作流**: 
  - ✅ 验证标准：有明确的分支策略（main/develop/feature）和提交信息规范
  - 🔍 检查方法：Git提交历史格式统一，分支管理规范清晰
  - 📋 输出物：Git工作流程文档

- [ ] **CI/CD流程**: 
  - ✅ 验证标准：有自动化构建、测试、部署的完整流程定义
  - 🔍 检查方法：CI配置文件包含代码检查、测试运行、构建验证步骤
  - 📋 输出物：CI/CD流程设计文档

#### 工具函数准备
- [ ] **UUID工具函数**: 
  - ✅ 验证标准：有统一的UUID生成、验证、格式化工具函数
  - 🔍 检查方法：工具函数包含完整的单元测试和使用示例
  - 📋 输出物：UUID工具函数库和测试报告

- [ ] **API请求封装**: 
  - ✅ 验证标准：有统一的HTTP请求封装，包含错误处理、重试机制、超时配置
  - 🔍 检查方法：API封装支持所有HTTP方法，错误处理机制完善
  - 📋 输出物：API请求工具库和使用文档

- [ ] **数据验证工具**: 
  - ✅ 验证标准：前后端使用相同的数据验证规则和错误信息
  - 🔍 检查方法：验证规则包含类型检查、格式验证、业务规则验证
  - 📋 输出物：数据验证规则库和测试用例

- [ ] **日志记录**: 
  - ✅ 验证标准：有统一的日志格式、日志级别、日志分类（业务/系统/错误）
  - 🔍 检查方法：日志配置支持不同环境的日志级别控制
  - 📋 输出物：日志记录规范和配置文档

### ✅ 5. 测试策略检查

#### 测试用例准备
- [ ] **单元测试计划**: 
  - ✅ 验证标准：核心业务逻辑测试覆盖率≥80%，关键函数100%覆盖
  - 🔍 检查方法：测试计划包含具体的测试类名、方法名、覆盖场景
  - 📋 输出物：单元测试计划文档和覆盖率报告

- [ ] **集成测试计划**: 
  - ✅ 验证标准：所有API接口都有对应的集成测试用例
  - 🔍 检查方法：集成测试覆盖正常流程、异常流程、边界条件
  - 📋 输出物：集成测试用例清单和执行计划

- [ ] **E2E测试脚本**: 
  - ✅ 验证标准：主要用户流程都有自动化E2E测试脚本
  - 🔍 检查方法：E2E测试能在Docker环境中稳定运行
  - 📋 输出物：E2E测试脚本库和执行报告

- [ ] **UAT验收标准**: 
  - ✅ 验证标准：每个功能都有明确的手动验收步骤和通过标准
  - 🔍 检查方法：UAT用例包含详细的操作步骤、输入数据、期望结果
  - 📋 输出物：UAT验收用例文档

#### 测试环境准备
- [ ] **测试数据准备**: 
  - ✅ 验证标准：有完整的测试数据集，覆盖正常、边界、异常三类场景
  - 🔍 检查方法：测试数据包含用户、联系人、模板、任务等完整业务数据
  - 📋 输出物：测试数据准备脚本和数据说明文档

- [ ] **测试工具配置**: 
  - ✅ 验证标准：Jest、Playwright等测试工具已正确配置且可正常运行
  - 🔍 检查方法：执行`npm test`和`npm run test:e2e`无错误
  - 📋 输出物：测试工具配置文档和验证报告

- [ ] **性能基准**: 
  - ✅ 验证标准：API响应时间<2s，页面加载时间<3s的明确基准
  - 🔍 检查方法：性能测试包含并发用户、数据量、响应时间的具体指标
  - 📋 输出物：性能基准文档和测试方案

### ✅ 6. 团队协作规范

#### 沟通机制
- [ ] **问题反馈渠道**: 
  - ✅ 验证标准：有明确的技术问题、需求疑问的反馈流程和责任人
  - 🔍 检查方法：问题反馈包含问题分类、优先级、处理时限的明确定义
  - 📋 输出物：问题反馈流程文档

- [ ] **进度同步**: 
  - ✅ 验证标准：有定期的进度同步机制（日报/周报）和阻塞问题升级流程
  - 🔍 检查方法：进度同步包含开发进度、测试进度、部署进度的统一格式
  - 📋 输出物：进度同步规范文档

- [ ] **代码Review**: 
  - ✅ 验证标准：所有代码变更都要经过Code Review，有明确的Review标准
  - 🔍 检查方法：Review标准包含代码质量、性能、安全、测试覆盖度检查
  - 📋 输出物：代码Review规范文档

#### 文档维护
- [ ] **实时更新**: 
  - ✅ 验证标准：设计变更后24小时内同步到相关文档
  - 🔍 检查方法：文档更新记录能追溯变更时间和变更原因
  - 📋 输出物：文档更新跟踪表

- [ ] **版本管理**: 
  - ✅ 验证标准：文档版本与代码版本建立明确的对应关系
  - 🔍 检查方法：每个Git tag都有对应的文档版本归档
  - 📋 输出物：文档版本管理规范

- [ ] **知识分享**: 
  - ✅ 验证标准：重要技术决策和踩坑经验都有文档记录
  - 🔍 检查方法：知识库包含决策背景、方案对比、实施结果的完整记录
  - 📋 输出物：技术决策知识库

## 🚨 常见踩坑严格检查

### 需求理解偏差
- [ ] **避免假设**: 
  - ✅ 验证标准：所有不明确的地方都有明确的确认记录（邮件/会议纪要）
  - 🔍 检查方法：需求文档中不能出现"应该"、"可能"、"大概"等模糊词汇
  - 📋 输出物：需求确认记录表

- [ ] **边界确认**: 
  - ✅ 验证标准：每个功能的输入范围、输出格式、性能要求都有明确定义
  - 🔍 检查方法：边界条件测试用例已设计，包含最大值、最小值、空值测试
  - 📋 输出物：功能边界定义文档

- [ ] **异常处理**: 
  - ✅ 验证标准：每种异常情况都有明确的处理方式和用户提示
  - 🔍 检查方法：异常处理包含系统恢复机制和用户操作指导
  - 📋 输出物：异常处理设计文档

### 技术实现分歧
- [ ] **架构决策记录**: 
  - ✅ 验证标准：重要技术选择都有ADR（Architecture Decision Record）文档
  - 🔍 检查方法：ADR包含背景、方案、决策、后果四个部分
  - 📋 输出物：技术决策记录库

- [ ] **接口约定**: 
  - ✅ 验证标准：前后端接口格式、字段类型、错误码都有明确约定
  - 🔍 检查方法：接口文档包含完整的示例请求和响应
  - 📋 输出物：接口约定规范文档

- [ ] **性能要求**: 
  - ✅ 验证标准：响应时间、并发能力、内存使用等非功能性需求有量化指标
  - 🔍 检查方法：性能要求包含测试方法和验收标准
  - 📋 输出物：性能需求规范文档

### 测试覆盖不足
- [ ] **真实环境测试**: 
  - ✅ 验证标准：测试使用真实的数据量、网络环境、并发场景
  - 🔍 检查方法：测试环境配置与生产环境保持一致性
  - 📋 输出物：真实环境测试报告

- [ ] **多浏览器兼容**: 
  - ✅ 验证标准：Chrome、Firefox、Safari主流浏览器兼容性验证
  - 🔍 检查方法：每个功能在不同浏览器中都要验证无问题
  - 📋 输出物：浏览器兼容性测试报告

- [ ] **并发场景**: 
  - ✅ 验证标准：多用户同时操作的并发场景测试，包含数据一致性验证
  - 🔍 检查方法：并发测试包含数据竞争、锁机制、事务处理的验证
  - 📋 输出物：并发场景测试报告

## 🎯 严格执行标准

### 检查完成标准
- ✅ **ALL CLEAR**: 所有检查项都有明确的✅验证标准、🔍检查方法、📋输出物
- 🚧 **PARTIALLY READY**: 超过80%的检查项完成，关键检查项无遗漏
- ❌ **NOT READY**: 任何关键检查项未完成，严禁开始编码

### 检查执行流程
1. **逐项核对**: 每个检查项都要生成对应的输出物
2. **多人验证**: 关键检查项需要至少2人确认
3. **文档存档**: 所有检查结果和输出物归档到`docs/standards/`目录
4. **问题处理**: 发现问题立即停止，修正后重新检查

### 质量保证
- **零容忍**: 对模糊、不明确、有假设的地方零容忍
- **可追溯**: 每个决策都有明确的记录和理由
- **可验证**: 每个检查项都有客观的验证标准

---

**检查清单版本**: v2.0 - 严谨版  
**基于项目**: EDM系统v2.0开发经验  
**维护责任**: 项目控制中心Agent  
**最后更新**: 2025-01-27 